{
  "hash": "6d17c510a19a084bdb5fed30651537f8",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"<span aria-hidden='true'>üöá</span> Transport for London (TfL) ‚Äî The Pulse Beneath the City\"\nsubtitle: \"How data reveals the hidden rhythm of London‚Äôs movement.\"\ndescription: \"A look into the heartbeat of London through TfL‚Äôs open data ‚Äî exploring Oyster and Contactless journeys, Tube entries and exits, and Cycle Hire usage to understand the patterns of a living metropolis.\"\ncategories: [data-science, urban-life, history]\nformat:\n  html:\n    toc: true\n    toc-depth: 3\n    code-fold: show\n    smooth-scroll: true\n    df-print: paged\n    anchor-sections: true\nexecute:\n  warning: false\n  message: false\n  echo: true\n  freeze: auto\n---\n\n# üö¶ A City in Motion\n\nEvery morning, the city exhales. Trains surge from the edges of London toward the center, buses weave through narrow streets, and cyclists form an almost-ritual migration across bridges. Transport for London ‚Äî TfL ‚Äî doesn‚Äôt just move people; it synchronizes the city‚Äôs pulse.\n\nBehind this choreography is an immense, open data system that captures every tap-in, every journey, and every pedal push. TfL‚Äôs datasets form one of the richest living chronicles of urban mobility ever shared with the public. Here, data becomes a mirror of daily life ‚Äî showing not just where we go, but how we *collectively breathe* as a metropolis.\n\n------------------------------------------------------------------------\n\n# üßÆ The Dataset\n\nTfL‚Äôs **Open Data Portal** provides a universe of transport information, from real-time service updates to historical ridership counts.\\\nFor this page, we focus on three high-value, narrative-friendly datasets:\n\n| Dataset | Description | Key Variables | Time Span |\n|------------------|------------------|-------------------|------------------|\n| **Oyster & Contactless Journey Data** | Aggregated counts of tap-in and tap-out journeys by mode and station. | `date`, `mode`, `entries`, `exits` | 2015‚Äìpresent |\n| **Tube Entry/Exit Counts** | Station-level totals of passenger entries and exits, usually monthly or annual aggregates. | `station`, `entries`, `exits`, `year` | 2007‚Äìpresent |\n| **Cycle Hire Usage** | Trip-level data from London‚Äôs Santander Cycle scheme. | `start_station`, `end_station`, `duration`, `timestamp` | 2010‚Äìpresent |\n\nEach dataset offers a different window into the rhythm of London: - **Journeys** show **flow** ‚Äî when and how people move. - **Entries/Exits** reveal **intensity** ‚Äî where the city‚Äôs heartbeat is strongest. - **Cycle Hire** tells a story of **adaptation** ‚Äî how London‚Äôs residents reclaim mobility.\n\nData source: [TfL Open Data Portal](https://tfl.gov.uk/info-for/open-data-users/our-open-data)\n\n------------------------------------------------------------------------\n\n# üó∫Ô∏è Visualising the Pulse\n\nBelow are examples (in R) of how we might bring this data to life using the tidyverse and spatial tools like `{sf}`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\n# Load CSV\ntube <- read_csv(\"../data/tfl/tube-entries-exits.csv\")\n\n# Summarise totals\ntube |>\n  group_by(station, year) |>\n  summarise(\n    total = sum(entries + exits, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |>\n  arrange(desc(total)) |>\n  slice_head(n = 10)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"station\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"year\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"total\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"King's Cross St. Pancras\",\"2\":\"2023\",\"3\":\"180454000\"},{\"1\":\"Waterloo\",\"2\":\"2023\",\"3\":\"173000000\"},{\"1\":\"Oxford Circus\",\"2\":\"2023\",\"3\":\"154000000\"},{\"1\":\"Victoria\",\"2\":\"2023\",\"3\":\"145000000\"},{\"1\":\"Liverpool Street\",\"2\":\"2023\",\"3\":\"140200000\"},{\"1\":\"London Bridge\",\"2\":\"2023\",\"3\":\"138000000\"},{\"1\":\"Stratford\",\"2\":\"2023\",\"3\":\"122000000\"},{\"1\":\"Bank/Monument\",\"2\":\"2023\",\"3\":\"118000000\"},{\"1\":\"Canary Wharf\",\"2\":\"2023\",\"3\":\"104000000\"},{\"1\":\"Paddington\",\"2\":\"2023\",\"3\":\"98000000\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n## Visualising Station Flow\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntube |>\n    ggplot(aes(x = reorder(station, total), y = total)) +\n    geom_col() +\n    coord_flip() +\n    labs(x = NULL, y = \"Total entries + exits\", title = \"London‚Äôs busiest stations\") +\n    theme_minimal()\n```\n\n::: {.cell-output-display}\n![Top 10 busiest Tube stations by annual entries and exits.](transport-for-london-tfl-the-pulse-beneath-the-city_files/figure-html/tfl-busiest-stations-1.png){fig-alt='Bar chart showing London\\'s busiest Tube stations ranked by total passengers.' width=672}\n:::\n:::\n\n\n## Mapping Cycle Hire Patterns\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(ggspatial)\nlibrary(rosm)\n\n# --- Load CSV ---\ncycle <- read_csv(\"../data/tfl/cycle-hire.csv\", show_col_types = FALSE)\n\n# --- Coordinate lookup (approximate) ---\ncoords <- tribble(\n  ~start_station,           ~lon,    ~lat,\n  \"Waterloo Station\",       -0.113,  51.503,\n  \"King's Cross Station\",   -0.122,  51.530,\n  \"Victoria Station\",       -0.143,  51.495,\n  \"London Bridge Station\",  -0.087,  51.505,\n  \"Paddington Station\",     -0.177,  51.516,\n  \"Stratford Station\",       0.002,  51.543,\n  \"Canary Wharf Station\",   -0.020,  51.505,\n  \"Holborn Station\",        -0.118,  51.517,\n  \"Bank Station\",           -0.089,  51.513,\n  \"Westminster Station\",    -0.125,  51.500\n)\n\n# --- Join & summarise to points (WGS84) ---\ncycle_pts_wgs84 <- cycle |>\n  left_join(coords, by = \"start_station\") |>\n  filter(!is.na(lon), !is.na(lat)) |>\n  group_by(start_station, lon, lat) |>\n  summarise(trips = n(), .groups = \"drop\") |>\n  st_as_sf(coords = c(\"lon\", \"lat\"), crs = 4326)\n\n# --- Compute a padded bbox from your data & transform to Web-Mercator (EPSG:3857) ---\nif (nrow(cycle_pts_wgs84) == 0) stop(\"No stations matched the coord lookup. Check start_station names.\")\ncycle_pts_3857 <- st_transform(cycle_pts_wgs84, 3857)\n\n# bbox padding helper (10% padding each side)\npad_bbox <- function(bb, pad = 0.10) {\n  x_pad <- (bb[\"xmax\"] - bb[\"xmin\"]) * pad\n  y_pad <- (bb[\"ymax\"] - bb[\"ymin\"]) * pad\n  c(xmin = bb[\"xmin\"] - x_pad,\n    xmax = bb[\"xmax\"] + x_pad,\n    ymin = bb[\"ymin\"] - y_pad,\n    ymax = bb[\"ymax\"] + y_pad)\n}\nbb_3857 <- st_bbox(cycle_pts_3857)\nbb_3857 <- pad_bbox(bb_3857, pad = 0.12)\n\n# --- Plot ---\nggplot() +\n  annotation_map_tile(type = \"osm\", zoomin = 0, progress = \"none\", cachedir = tempdir()) +\n# halo (bigger, semi-transparent)\ngeom_sf(\n  data = cycle_pts_3857,\n  aes(size = trips),\n  color = \"yellow\",\n  alpha = 0.65,\n  size  = 4,        # fixed base size for the glow\n  show.legend = FALSE\n) +\n# core point (smaller, solid)\ngeom_sf(\n  data = cycle_pts_3857,\n  aes(size = trips),\n  shape = 21,\n  fill  = \"springgreen\",   # or \"cyan3\", \"springgreen3\"\n  color = \"yellow\",\n  stroke = 0.8,\n  alpha  = 1\n) +\n  coord_sf(xlim = c(bb_3857[\"xmin\"], bb_3857[\"xmax\"]),\n           ylim = c(bb_3857[\"ymin\"], bb_3857[\"ymax\"]),\n           expand = FALSE, crs = st_crs(3857)) +\n  annotation_scale(location = \"bl\", width_hint = 0.25, text_cex = 0.7) +\n  annotation_north_arrow(location = \"tr\", style = north_arrow_fancy_orienteering) +\n  theme_void() +\n  labs(title = \"Cycle Hire Start Stations (sample data on OSM tiles)\",\n       size = \"Trips\")\n```\n\n::: {.cell-output-display}\n![](transport-for-london-tfl-the-pulse-beneath-the-city_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n# üí° Story Sparks\n\n| Story Idea | Core Question | Visualization | Why It Matters |\n|------------|---------------|---------------|----------------|\n\n|  |  |  |  |\n|------------------|------------------|------------------|------------------|\n| **The Breath of the City** | How do London‚Äôs transport flows resemble biological rhythms? | Time-series of daily ridership peaks. | Shows how human mobility mirrors life‚Äôs natural cycles. |\n\n|  |  |  |  |\n|------------------|------------------|------------------|------------------|\n| **When London Paused** | What did the pandemic reveal about dependence on movement? | Before-and-after ridership comparison (2019 vs 2020). | Captures fragility and resilience in modern infrastructure. |\n\n|  |  |  |  |\n|------------------|------------------|------------------|------------------|\n| **The Rise of the Cyclist** | How did Londoners reclaim the streets via cycling? | Map of trip density pre- and post-lockdown. | Illustrates adaptive behavior under constraint. |\n\n|  |  |  |  |\n|------------------|------------------|------------------|------------------|\n| **The Geography of Delay** | Which stations create the largest ripple effects when disrupted? | Network-based delay propagation model. | Connects local events to city-wide consequences. |\n\n|  |  |  |  |\n|------------------|------------------|------------------|------------------|\n| **Underground Empathy** | Do certain lines reflect socioeconomic divides? | Overlay ridership with census data. | Reveals how movement encodes inequality. |\n\n# üåç Beyond the Underground\n\nThe TfL datasets extend beyond transport‚Äîthey‚Äôre a **social dataset** wrapped in motion. They trace where opportunity lies, how urban planning shapes behavior, and how collective rhythms respond to stress, weather, or policy change.\n\nImagine joining TfL data with:\n\n-   **Weather records** ‚Üí To see how rain reshapes the city‚Äôs mobility map.\n\n-   **Event data** ‚Üí To observe London‚Äôs cultural pulse through ridership spikes.\n\n-   **Census and housing data** ‚Üí To explore links between accessibility and affordability.\n\nTogether, these connections form the **metabolism of the metropolis** ‚Äî the invisible circulatory system that keeps London alive.\n\n# üîÆ Future Possibilities\n\n-   Integrate **live TfL API feeds** (train positions, service disruptions).\n\n-   Add **interactive dashboards** with Quarto + Plotly or Observable.\n\n-   Develop **‚ÄúCity Symphonies‚Äù**: sonifying transport data as daily rhythms.\n\n-   Expand comparative studies ‚Äî ‚ÄúParis vs. London,‚Äù ‚ÄúTokyo‚Äôs Quiet Hours,‚Äù etc.\n\n# üìö References & Credits\n\n-   Transport for London Open Data Portal: [https://tfl.gov.uk/info-for/open-data-users/our-open-data](https://tfl.gov.uk/info-for/open-data-users/our-open-data?utm_source=chatgpt.com)\n\n-   Greater London Authority: *London Datastore*\n\n-   OpenStreetMap contributors (for mapping)\n\n-   R packages: `{tidyverse}`, `{sf}`, `{lubridate}`, `{ggplot2}`\n\n-   Insightful Tales, 2025 ‚Äî ‚ÄúWhere data finds its narrative.‚Äù\n",
    "supporting": [
      "transport-for-london-tfl-the-pulse-beneath-the-city_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}